{% extends "graphwhy:templates/layout.jinja2" %}

{% block content %}

    <script>
        
    </script>

    <form action="{{request.route_url('question_action',action=action)}}" method="post" class="form">
        <h3 class="sg-p-color">Create a Daily Question</h3>
        <br/>
        {% if action =='edit' %}
            {{ form.id() }}
        {% endif %}
        {# Question form #}
        <div class="form-group">


            {# daily question prompt feild #}
            <label for="question" class="" style="font-weight:700;color:#555;">{{ form.question.label }}</label>
            {% for error in form.question.errors %}
                <div class="alert alert-danger">{{ error }}</div>
            {% endfor %}
            Did I {{ form.question(class_='form-control', default='general') }} Today?
            <br/>

            {# color prompt feild #}
            {% for error in form.color.errors %}
                <div class="alert alert-danger">{{ error }}</div>
            {% endfor %} 
            <label for="color" class=""  style="font-weight:700;color:#555;">{{ form.color.label }}</label>
            {{ form.color(class_='form-control', default='general') }}
            <br/>

            {# color prompt feild #}
            {% for error in form.date.errors %}
                <div class="alert alert-danger">{{ error }}</div>
            {% endfor %} 
            <label for="date" class="r" style="font-weight:700;color:#555;">{{ form.date.label }}</label>
            {{ form.date(class_='form-control', default='general') }}
            <br/>            

            <div style="visibility:hidden; height:0px;">
                {# Type form #}
                <label for="body" class="sg-a1-color">{{ form.type.label }}</label>
                {% for error in form.type.errors %}
                    <div class="alert alert-danger">{{ error }}</div>
                {% endfor %}
                <textarea class="form-control" id="type" name="type">General, Daily Question</textarea>
                {# Description form #}
                <label for="body" class="sg-a1-color">{{ form.description.label }}</label>
                {% for error in form.description.errors %}
                    <div class="alert alert-danger">{{ error }}</div>
                {% endfor %}
                <textarea class="form-control" default="null" id="description" name="description">Generic Question</textarea>

                {# Question options form #}
                <label for="body" class="sg-a1-color">{{ form.question_option.entries[0].question_option.label }}</label>
                {% for error in form.question_option.errors %}
                    <div class="alert alert-danger">{{ error }}</div>
                {% endfor %}
                
                <ol>
                    <li> 
                        <textarea class="form-control" default="Yes" id="question_option-0-question_option" name="question_option-0-question_option">Yes</textarea>
                    </li>
                    <li> 
                        <textarea class="form-control" default="Yes" id="question_option-1-question_option" name="question_option-1-question_option">No</textarea>
                    </li>
                    <inserthere id="options"></inserthere>
                </ol>
                <div class="voter-bar" style="margin-left:40px;padding: 0px 9px;">
                    <a onclick="removeOption()" style="cursor:pointer;"> - </a>   
                </div>
                <div class="voter-bar" style="margin-left:5px;">
                    <a onclick="appendOption()" style="cursor:pointer;"> + </a>       
                </div>
            </div>
        </div>

        <div class="form-group">
            <label></label>
            <button type="submit" class="btn btn-default" style="width:100%;" >Submit</button>
        </div>
    </form>
        
    <script>    
       iPrime = 2;
       function appendOption() {
          var newItem = document.createElement("LI");
          newItem.setAttribute("id", "item" + iPrime);
          var optionTextArea = document.createElement("textarea");
          optionTextArea.className = "form-control";
          optionTextArea.setAttribute("name", "question_option-"+iPrime+"-question_option");
          optionTextArea.setAttribute("id", "question_option-"+iPrime+"-question_option");
          newItem.appendChild(optionTextArea);

          var list = document.getElementById("options");
          list.insertBefore(newItem, list.childNodes[iPrime++]);
       }
       function removeOption() {
          console.log("clicked");
          if(iPrime > 2){
              iPrime--;
              var oldForm = document.getElementById("question_option-"+iPrime+"-question_option");
              var oldItem = document.getElementById("item" + iPrime);
              oldForm.remove();
              oldItem.remove();
          }
       }
    </script>



{% endblock %}
